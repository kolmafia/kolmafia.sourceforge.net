<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//Tigris//DTD XHTML 1.0 Transitional//EN"
"http://style.tigris.org/tigris_transitional.dtd">
<html>
<head>
  <style type="text/css">/* <![CDATA[ */  @import "css/tigris.css";  @import "css/inst.css";  /*  ]]> */ </style>
  <link rel="stylesheet" type="text/css" href="css/print.css" media="print" />
 <title>KoLmafia: User Manual</title>
</head>

<body>
<a href="http://sourceforge.net"><img src="http://sourceforge.net/sflogo.php?group_id=126572&amp;type=1" width="88" height="31" border="0" alt="SourceForge.net Logo" /></a>
<div class="app">

 <a name="intro"></a>
 <h3>Introducing Custom Combat</h3>

  <dl><dd>The custom combat settings file (ccs/<i>name</i>.ccs) is arranged in such a way that a player can specify which commands to execute against which monsters.  For ease of use, all matching is substring-based.  First, an attempt is made to match against the monster name.  That failing, an attempt is made to match against the location name - unless the monster is one currently unknown to KoLmafia (and therefore likely to be part of some special event, and not related to the known monsters in that location), in which case a section named "unrecognized" is looked for.  In case of multiple matches, the longest match wins.</dd>

  <dd>Customization is designed only to depend only on the monster you are currently fighting -- it is not meant to allow for strategies that a person changes based on remaining health or mana.  Advanced customization on this level means that the resulting scripts are difficult to read, which defeats the point of this feature's introduction.</dd>

  <dd>However, in the event that you wish to make use of such advanced customization, there is an undocumented "consult" command which can be used in these scripts -- for more information on how consult scripts work, you will need read through KoLmafia's source code.  Do not request documentation of this feature or assistance with this feature; it will not be provided.</dd></dl>

 <a name="structure"></a>
 <h3>File Structure</h3>

  <dd><pre style="background-color: #f0f0ff"><blockquote>
[ default ]
what to do in round 1 (or all rounds if no more data is specified)
what to do in round 2 (or all rounds after round 1 if no more data is specified)

[ partial name of monster ]
what to do in round 1 (or all rounds if no more data is specified)
what to do in round 2 (or all rounds after round 1 if no more data is specified)

[ partial name of area ]
what to do in round 1 (or all rounds if no more data is specified)
what to do in round 2 (or all rounds after round 1 if no more data is specified)
&nbsp;</blockquote></pre></dd></dl>


 <a name="values"></a>
 <h3>Permitted Values</h3>

  <dl><dd>Any monster or area not flagged internally by KoLmafia as an ultra-rare encounter can be customized; no matter what is specified in the custom combats file, KoLmafia will always abort for ultra-rare monsters.</dd>

  <dd>After setting up your custom combat settings, you might notice that KoLmafia changes it so that all the commands are prefixed with a round number.  This is strictly for internal management purposes to make things more compact; you do not have to type things in this way.</dd>

  <dd>Settings can be modified once the player is logged in by clicking the "edit" button in the "Custom Combat" tab of the Adventure window, or by manually modifying the *.ccs file mentioned previously.  Note that if you choose to modify the file directly, you must do so before login; KoLmafia will not reload the settings every battle.</dd>
  
  <dd>Here are the currently supported commands.  In the event that KoLmafia fails to understand what you are trying to say, the command will usually be changed into an attack, so it's a good idea to look over the script after it has been saved to make sure everything was interpreted as you intended.
  
  <dl>
   <dt><b>attack</b><dd>Normal attack with your equipped weapon.
   <dt><b>steal</b><dd>Attempt to pick the monster's pocket, assuming that you're capable of doing so, and the monster has at least one known pickpocketable item drop (that isn't guaranteed to drop anyway, due to your item drop bonus).  This action will be skipped if KoLmafia thinks the monster will seriously hurt you, unless it drops an item in your current goals.
   <dt><b>jiggle</b><dd>Jiggle your chefstaff, if you have one equipped.
   <dt><b>summon ghost</b><dd>For Pastamancers only.
   <dt><b>delevel</b><dd>Uses any delevelling skills you have in order to reduce the monster's level to a point where normal attacks will be effective.
   <dt><b>run away</b><dd>Tries to run away.
   <dt><b>run away if <i>number</i>% chance of being free</b><dd>Tries to run away, but only if you have at least the specified chance of this not taking a turn (due to equipment such as the navel ring, or a familiar such as the Bandersnatch).
   <dt><b>item <i>name</i></b><dd>Uses the specified item.  If you have Ambidextrous Funkslinging, another of the item will be used (if you have at least two of them, and it's not something that's only meaningful to use once), or a reusable combat item will be chosen for you.  Combat is aborted if you don't have the item.
   <dt><b>item <i>name1</i>, <i>name2</i></b><dd>Uses two items.  If you don't have Ambidextrous Funkslinging, the second item will only be used if you have none of the first.  If you do have the skill, it's OK to not have the first item, but you must have at least the second one.
   <dt><b>skill <i>name</i></b><dd>Use a combat skill.  The action taken if you have insufficient MP to use it (either skipping the command, or spending rounds using MP restorers) is specified in the "Special" popup in the Adventure window.
   <dt><b>combo <i>name</i></b><dd>Use a Disco combo, for example "combo rave nirvana".  Does nothing if you aren't a Disco Bandit, don't know all of the skills used in the combo, or don't know the combo itself (in the case of rave combos).  If in-combat MP restoration is enabled, it is performed once (for the entire MP cost of the skills), to avoid breaking the combo.
   <dt><b>special</b><dd>This command indicates where certain actions specified by the "Special" popup in the Adventure window should be inserted, such as automatic Transcendent Olfaction use.  If no such action is currently needed, the command will be skipped.  This should generally go after any commands that stun the monster, but before any commands that might kill it.
   <dt><b>default</b><dd>Continue the script starting with the first line of the section named "default".  This must be the final command in the current section.
   <dt><b>section <i>name</i></b><dd>Continue the script starting with the first line of the indicated section.  This must be the final command in the current section.
   <dt><b>abort</b><dd>Immediately aborts combat automation, allowing the user to finish the combat manually.  If the CCS was invoked via the Script button in the relay browser, clicking it again will restart the CCS after the "abort" command.
   <dt><b>abort after</b><dd>Does nothing immediately, but automation will end after the current combat is finished.
   <dt><b>skip</b><dd>Continue with the next command in the script.  This might be useful to temorarily replace a command, without having to renumber all the following lines.
   <dt><b>note <i>text</i></b><dd>Does nothing, but allows arbitrary text to be added to the script.  The text can be a comment, or a parameter that an ASH script can read via the get_ccs_action() function.
   <dt><b>twiddle</b><dd>Wastes a round doing nothing.  It's hard to imagine any reason you'd want to do this, but it's here for completeness.
  </dl>

 </dl>

 <a name="example"></a>
 <h3>Custom Combat Settings File Example</h3>

  <dl><dd>As a demonstration of how to structure the file and how the commands should look, the following is what a disco bandit might use for their settings file, assuming they had already acquired the "disco face stab" skill and wanted to use it to weaken some of the game's stronger opponents before taking them down with either moxious maneuvers or standard attacks.</dd>

  <dd><pre style="background-color: #f0f0ff"><blockquote>
[ default ]
attack

[ mechamech ]
delevel

[ giant skeelton ]
skill moxious maneuver

[ huge ghuol ]
skill moxious maneuver

[ conjoined zmombie ]
skill moxious maneuver

[ giant skeelton ]
skill moxious maneuver

[ gargantulihc ]
skill moxious maneuver

[ orc chasm ]
item dictionary

&nbsp;</blockquote></pre></dd></dl>


 </blockquote></dl>

 </blockquote></dl>

</div><div class="footnote">Copyright &#169; 2003 Jason Robbins.  All rights reserved. <a href="readyset-license.html">License terms</code></a>.  Retain this copyright statement whenever this file is used as a template.</div>
